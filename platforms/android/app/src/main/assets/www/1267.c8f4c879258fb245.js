"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1267],{1267:(b,h,c)=>{c.r(h),c.d(h,{NamePageModule:()=>M});var d=c(9808),l=c(3075),o=c(8058),g=c(1216),s=c(7582),t=c(5e3),y=c(7053),p=c(8995);function f(i,r){if(1&i){const n=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,u=t.oxw();return t.KtG(u.setCity(a))}),t.TgZ(1,"ion-label"),t._uU(2),t._UZ(3,"br"),t.TgZ(4,"small",10),t._uU(5),t.qZA()()()}if(2&i){const n=t.oxw().$implicit;t.xp6(2),t.AsE("\u0433. ",n.data.city?n.data.city:n.data.region,", ",n.data.country,""),t.xp6(3),t.Oqu(n.unrestricted_value)}}function C(i,r){if(1&i&&(t.ynx(0),t.YNc(1,f,6,3,"ion-item",8),t.BQk()),2&i){const n=r.$implicit;t.xp6(1),t.Q6J("ngIf",n.data.city||n.data.region)}}let _=(()=>{class i{constructor(n,e,a,u){this.modalCtrl=n,this.authService=e,this.element=a,this.platform=u,this.findList=[],this.viewText=!1,this.scrollTopPosition=0,this.disableScroll=!1,this.cities=[],this.items=[]}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){})}findCity(n){return(0,s.mG)(this,void 0,void 0,function*(){const e=n.target.value.toString().trim().toLowerCase();e.length>=2?(this.viewText=!0,this.findList=yield this.authService.findCity(e).toPromise()):(this.viewText=!1,this.findList=[])})}setCity(n){return(0,s.mG)(this,void 0,void 0,function*(){n.data.city||n.data.region?yield this.modalCtrl.dismiss({city:n}):yield this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434")})}scrollEvent(n){this.scrollTopPosition=n.detail.scrollTop}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(o.IN),t.Y36(y.$),t.Y36(t.SBq),t.Y36(o.t4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-choice-city"]],decls:17,vars:10,consts:[[1,"ion-padding"],["slot","start"],["text",""],[1,"myBorder"],["lines","none",1,"agroinput","marginBottom5"],["type","text","name","name","minlength","2","maxlength","60",3,"placeholder","ionChange"],["scrollEvents","true",1,"ion-padding"],[4,"ngFor","ngForOf"],["class","my-cities","lines","none",3,"click",4,"ngIf"],["lines","none",1,"my-cities",3,"click"],[1,"unrestricted_value"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"h3"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-toolbar",3)(11,"ion-item",4)(12,"ion-input",5),t.NdJ("ionChange",function(u){return e.findCity(u)}),t.ALo(13,"translate"),t.qZA()()()(),t.TgZ(14,"ion-content",6)(15,"ion-list"),t.YNc(16,C,2,1,"ng-container",7),t.qZA()()),2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434")),t.xp6(3),t.Oqu(t.lcZ(9,6,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430")),t.xp6(4),t.s9C("placeholder",t.lcZ(13,8,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434")),t.xp6(4),t.Q6J("ngForOf",e.findList))},dependencies:[d.sg,d.O5,o.oU,o.Sm,o.W2,o.Gu,o.pK,o.Ie,o.Q$,o.q_,o.sr,o.j9,o.cs,p.X$],styles:["ion-header[_ngcontent-%COMP%]{background:#1C1A28;color:#fff}ion-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}ion-content.disable-scroll[_ngcontent-%COMP%]{touch-action:pan-down!important}ion-content[_ngcontent-%COMP%] > ion-list.disable-scroll[_ngcontent-%COMP%]{touch-action:pan-down!important}.bottomImg[_ngcontent-%COMP%]{position:absolute;bottom:0}ion-toolbar[_ngcontent-%COMP%]{--background: none!important;--padding: 0!important;padding:0!important}ion-toolbar[_nghost-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{padding:0!important}.agroinput[_ngcontent-%COMP%]{border:1px solid white;margin-bottom:0!important;color:#fff!important;--background: #1C1A28;border-radius:10px!important}ion-toolbar[_ngcontent-%COMP%]:last-of-type{--border-width: 0 0 0px}ion-list[_ngcontent-%COMP%]{background:none!important}ion-item[_ngcontent-%COMP%]{font-weight:600}.textHeaderCity[_ngcontent-%COMP%]{text-align:right!important;font-weight:700}.unrestricted_value[_ngcontent-%COMP%]{color:gray}.searchBar[_ngcontent-%COMP%]{border:1px solid #989898;border-radius:10px}ion-header[_ngcontent-%COMP%]{padding-bottom:0!important}ion-content[_ngcontent-%COMP%]{--padding-top: 0!important}ion-header[_ngcontent-%COMP%]{display:block!important;height:auto!important}.my-cities[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff!important}"]}),i})();var v=c(9851);const P=[{path:"",component:(()=>{class i{constructor(n,e,a,u){this.authService=n,this.modalController=e,this.app=a,this.router=u,this.name="",this.country="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435",this.city="\u043e\u0440\u043e\u0434"}ngOnInit(){}back(){}regUser(){return(0,s.mG)(this,void 0,void 0,function*(){this.city&&"\u043e\u0440\u043e\u0434"!==this.city&&this.name.length>2?yield this.authService.regUser(this.name).toPromise().then(n=>(0,s.mG)(this,void 0,void 0,function*(){n.status&&(yield this.app.checkSession(),yield this.router.navigate(["/tabs/home"],{replaceUrl:!0}))})).catch(n=>(0,s.mG)(this,void 0,void 0,function*(){})):this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438")})}selectRegion(){return(0,s.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:_,swipeToClose:!0,showBackdrop:!0,breakpoints:[0,.9],initialBreakpoint:.9,presentingElement:yield this.modalController.getTop(),backdropDismiss:!0,cssClass:"modalCss",mode:"ios"});yield n.present();const{data:e}=yield n.onWillDismiss();e&&e.city&&(console.log(e.city.data),yield this.authService.saveCityInfo(e.city.data).toPromise().then(a=>(0,s.mG)(this,void 0,void 0,function*(){var u,m;a.status&&(this.country=e.city.data.country,this.city=e.city.data.city?e.city.data.city:e.city.data.region,null===(u=this.authService.currentUser)||void 0===u||(u.city=e.city.data.city?e.city.data.city:e.city.data.region),null===(m=this.authService.currentUser)||void 0===m||(m.country=e.city.data.country))})).catch(a=>(0,s.mG)(this,void 0,void 0,function*(){console.log(a)})))})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(y.$),t.Y36(o.IN),t.Y36(v.y),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-name"]],decls:27,vars:23,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"wrapper-fluid"],[1,"logo-wrap"],["src","assets/img/logo.png","alt",""],[1,"body-wrap","form-block"],["action","",1,"autorize"],["for","pass"],["id","pass","type","text","name","pass",3,"placeholder","ngModel","ngModelChange"],["for","pass",3,"click"],["id","region","type","text","name","region",3,"placeholder","ngModel","click","ngModelChange"],[1,"bottom-wrap","autorize-btns"],[1,"classic-btn",3,"click"],[1,"or"],[1,"support-btn"],["src","assets/img/support.svg","alt",""]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"form",5)(6,"label",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("ngModelChange",function(u){return e.name=u}),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"label",8),t.NdJ("click",function(){return e.selectRegion()}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"input",9),t.NdJ("click",function(){return e.selectRegion()})("ngModelChange",function(u){return e.country+" \u0433"+(e.city=u)}),t.ALo(15,"translate"),t.qZA()()(),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return e.regUser()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"span",12),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"button",13),t._UZ(24,"img",14),t._uU(25),t.ALo(26,"translate"),t.qZA()()()()),2&n&&(t.xp6(7),t.Oqu(t.lcZ(8,9,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0424\u0418\u041e")),t.xp6(2),t.s9C("placeholder",t.lcZ(10,11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448\u0435 \u0424\u0418\u041e")),t.Q6J("ngModel",e.name),t.xp6(3),t.Oqu(t.lcZ(13,13,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u0440\u0435\u0433\u0438\u043e\u043d")),t.xp6(2),t.s9C("placeholder",t.lcZ(15,15,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u0440\u0435\u0433\u0438\u043e\u043d")),t.Q6J("ngModel",e.country+" \u0433"+e.city),t.xp6(4),t.Oqu(t.lcZ(19,17,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),t.xp6(3),t.Oqu(t.lcZ(22,19,"\u0438\u043b\u0438")),t.xp6(4),t.Oqu(t.lcZ(26,21,"\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438")))},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,o.W2,p.X$]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.Bz.forChild(P),g.Bz]}),i})(),M=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,l.u5,o.Pc,Z,p.aw]}),i})()}}]);